<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Campingwetter Tilleda</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #e0f7fa; color: #000; }
    ul { list-style-type: none; padding: 0; }
    li { background-color: #fff; margin: 10px 0; padding: 10px; border-radius: 5px; }
    .perfect { border-left: 5px solid #4caf50; }
    .almost { border-left: 5px solid #ffa000; }
    .bad { border-left: 5px solid #e53935; }
    .greiner-button { margin-top: 20px; padding: 10px 15px; background-color: #81c784; border: none; color: white; font-weight: bold; border-radius: 8px; cursor: pointer; }
    .greiner-output { margin-top: 10px; font-style: italic; color: #00796b; font-size: 1.1em; }
    .last-updated { font-size: 0.85em; color: #444; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>⛺ Campingwetter Tilleda</h1>
  <p>Nur perfekte Tage fürs Zelten – schlechte Tage blendet Greiner aus. 😉</p>
  <ul id="campingDays"></ul>
  <div class="last-updated" id="lastUpdated"></div>
  <button class="greiner-button" onclick="greinerSagt()">🤔 Was würde Greiner tun?</button>
  <div class="greiner-output" id="greinerSpruch"></div>
  <audio id="greinerSound">
    <source src="https://actions.google.com/sounds/v1/human_voices/man_laugh_and_cheer.ogg" type="audio/ogg">
  </audio>

  <script>
    const lat = 51.4575, lon = 11.0581;
    const apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,cloudcover_mean,windspeed_10m_max,relative_humidity_2m_mean&timezone=Europe%2FBerlin`;

    fetch(apiUrl)
      .then(res => res.json())
      .then(data => {
        const days = data.daily;
        const list = document.getElementById('campingDays');
        list.innerHTML = '';
        const updated = document.getElementById('lastUpdated');
        const now = new Date();
        updated.textContent = `🔄 Letzte Aktualisierung: ${now.toLocaleTimeString("de-DE")}`;

        for (let i = 0; i < days.time.length; i++) {
          const max = days.temperature_2m_max[i];
          const min = days.temperature_2m_min[i];
          const rain = days.precipitation_sum[i];
          const clouds = days.cloudcover_mean[i];
          const wind = days.windspeed_10m_max[i];
          const humidity = days.relative_humidity_2m_mean[i];

          const date = days.time[i];
          const icon = clouds < 20 ? '☀️' : clouds < 70 ? '⛅' : '☁️';

          const li = document.createElement('li');
          li.textContent = `${date}: ${icon} ${max}°C / ${min}°C`;

          if (max >= 17 && max <= 30 && min >= 9 && min <= 21 && rain === 0 && clouds <= 50 && wind < 30 && humidity < 70) {
            li.classList.add('perfect');
            li.innerHTML += "<br><strong>🌟 Perfekter Campingtipp!</strong>";
          } else if (max >= 15 && max <= 32 && min >= 7 && min <= 23 && rain <= 1 && clouds <= 70 && wind < 35 && humidity <= 75) {
            li.classList.add('almost');
            li.innerHTML += "<br><strong>👍 Fast perfekt – mit kleinen Abstrichen</strong>";
          } else {
            li.classList.add('bad');
            li.innerHTML += "<br><strong>❌ Nicht einmal der Greiner hat da Bock.</strong>";
          }

          list.appendChild(li);
        }
      });

    function greinerSagt() {
      const sprueche = [
        "Der Greiner braucht keinen Wetterbericht – er IST das Wetter!",
        "Wenn das Zelt fliegt, fliegt Greiner einfach mit.",
        "Greiner grillt notfalls auch im Schneesturm. Mit Flip-Flops.",
        "Wenn’s regnet, nennt der Greiner das eben Naturdusche deluxe.",
        "Sonne? Schnee? Wind? Greiner ist vorbereitet – auf alles. Immer.",
        "Greiner schläft bei Gewitter besser als du in deiner Matratze zu Hause.",
        "Greiner trinkt Tee im Sturm – ohne dass der Becher wackelt.",
        "Zelten bei 35°C? Greiner nennt das Saunieren mit Aussicht.",
        "Kälte ist relativ. Greiner ist absolut warmherzig genug.",
        "Wenn’s hagelt, stellt Greiner einfach den Grill unter die Plane.",
        "Der Greiner braucht keine Stirnlampe – er strahlt von innen.",
        "( ͡° ͜ʖ ͡°)   \nGreiner approved!"
      ];
      const out = document.getElementById("greinerSpruch");
      const sound = document.getElementById("greinerSound");
      out.textContent = sprueche[Math.floor(Math.random() * sprueche.length)];
      sound.play();
    }
  </script>
</body>
</html>
