
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Campingwetter Tilleda</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background: #e3f2fd; margin: 0; padding: 20px; color: #000; }
    h1 { text-align: center; }
    ul { list-style-type: none; padding: 0; }
    li { margin: 10px 0; padding: 10px; background: #fff; border-left: 5px solid #ccc; border-radius: 4px; }
    .perfect { border-color: green; }
    .almost { border-color: orange; }
    .bad { border-color: red; }
    .greiner-output { margin-top: 1em; font-style: italic; }
    .last-updated { font-size: 0.85em; margin-top: 1em; }
    img.greiner-icon { margin-top: 8px; max-width: 100px; display: block; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1em; background: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>â›º Campingwetter Tilleda</h1>
  <p>Nur perfekte oder fast perfekte Campingtage â€“ sonst Ã¼bernimmt der Greiner! ğŸ˜</p>
  <ul id="campingDays"></ul>
  <div class="last-updated" id="lastUpdated"></div>
  <button onclick="greinerSagt()">ğŸ¤” Was wÃ¼rde Greiner tun?</button>
  <div id="greinerSpruch" class="greiner-output"></div>
  <audio id="greinerSound"><source src="https://actions.google.com/sounds/v1/human_voices/man_laugh_and_cheer.ogg" type="audio/ogg"></audio>

  <script>
    const list = document.getElementById("campingDays");
    const updated = document.getElementById("lastUpdated");

    const iconMap = {
      regen: "warnsystem_regen.png",
      sturm: "warnsystem_sturm.png",
      hitze: "warnsystem_hitze.png",
      kalt: "warnsystem_kalt.png",
      wolken: "warnsystem_wolken.png"
    };

    function getGreinerImage(reason) {
      return `<img src="${iconMap[reason]}" alt="${reason}" class="greiner-icon">`;
    }

    fetch("https://api.open-meteo.com/v1/forecast?latitude=51.4575&longitude=11.0581&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,cloudcover_mean,windspeed_10m_max,relative_humidity_2m_mean&timezone=Europe%2FBerlin")
      .then(r => r.json())
      .then(data => {
        const days = data.daily;
        const now = new Date();
        updated.textContent = "ğŸ”„ Letzte Aktualisierung: " + now.toLocaleTimeString("de-DE");

        for (let i = 0; i < days.time.length; i++) {
          const max = days.temperature_2m_max[i];
          const min = days.temperature_2m_min[i];
          const rain = days.precipitation_sum[i];
          const clouds = days.cloudcover_mean[i];
          const wind = days.windspeed_10m_max[i];
          const humidity = days.relative_humidity_2m_mean[i];
          const date = new Date(days.time[i]);
          const weekday = date.toLocaleDateString("de-DE", { weekday: "long" });
          const formatted = `${weekday}, ${days.time[i]}`;
          const icon = clouds < 20 ? "â˜€ï¸" : clouds < 70 ? "â›…" : "â˜ï¸";
          const li = document.createElement("li");
          let reason = "";

          li.innerHTML = `<strong>${formatted}:</strong> ${icon} ${max}Â°C / ${min}Â°C`;

          if (max >= 17 && max <= 30 && min >= 9 && min <= 21 && rain === 0 && clouds <= 50 && wind < 30 && humidity < 70) {
            li.classList.add("perfect");
            li.innerHTML += "<br><strong>ğŸŒŸ Perfekter Campingtipp!</strong>";
          } else if (max >= 15 && max <= 32 && min >= 7 && min <= 23 && rain <= 1 && clouds <= 70 && wind < 35 && humidity <= 75) {
            li.classList.add("almost");
            li.innerHTML += "<br><strong>ğŸ‘ Fast perfekt â€“ mit kleinen Abstrichen</strong>";
          } else {
            li.classList.add("bad");
            if (rain > 1) {
              li.innerHTML += "<br><strong>ğŸŒ§ï¸ Regen? Der Greiner nennt das Himmelssauna.</strong>";
              reason = "regen";
            } else if (wind >= 35) {
              li.innerHTML += "<br><strong>ğŸ’¨ Zelt weht weg? Greiner fliegt einfach mit.</strong>";
              reason = "sturm";
            } else if (max > 32) {
              li.innerHTML += "<br><strong>ğŸ”¥ 35 Grad? Greiner nennt das WÃ¼stencamp mit Wellness.</strong>";
              reason = "hitze";
            } else if (min < 5) {
              li.innerHTML += "<br><strong>â„ï¸ Kalt? Greiner grillt sich von innen mit GlÃ¼hwein warm.</strong>";
              reason = "kalt";
            } else if (clouds > 80) {
              li.innerHTML += "<br><strong>â˜ï¸ Keine Sonne? Greiner bringt sein eigenes Strahlen mit.</strong>";
              reason = "wolken";
            }
            if (reason) li.innerHTML += getGreinerImage(reason);
          }

          list.appendChild(li);
        }
      });

    function greinerSagt() {
      const sprueche = [
        "Der Greiner braucht keinen Wetterbericht â€“ er IST das Wetter!",
        "Wenn das Zelt fliegt, fliegt Greiner einfach mit.",
        "Greiner grillt notfalls auch im Schneesturm. Mit Flip-Flops.",
        "Wennâ€™s regnet, nennt der Greiner das eben Naturdusche deluxe.",
        "Sonne? Schnee? Wind? Greiner ist vorbereitet â€“ auf alles. Immer.",
        "Greiner schlÃ¤ft bei Gewitter besser als du in deiner Matratze zu Hause.",
        "Greiner trinkt Tee im Sturm â€“ ohne dass der Becher wackelt.",
        "Zelten bei 35Â°C? Greiner nennt das Saunieren mit Aussicht.",
        "KÃ¤lte ist relativ. Greiner ist absolut warmherzig genug.",
        "Wennâ€™s hagelt, stellt Greiner einfach den Grill unter die Plane.",
        "Der Greiner braucht keine Stirnlampe â€“ er strahlt von innen.",
        "( Í¡Â° ÍœÊ– Í¡Â°)   
Greiner approved!"
      ];
      document.getElementById("greinerSpruch").textContent = sprueche[Math.floor(Math.random() * sprueche.length)];
      document.getElementById("greinerSound").play();
    }
  </script>
</body>
</html>
